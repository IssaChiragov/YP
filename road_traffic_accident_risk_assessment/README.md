# Оценка рисков ДТП
- Заказчик каршеринговая компания
- Нужно оценить риск ДТП по выбранному маршруту движения
- Под риском понимается вероятность ДТП с любым повреждением транспортного средства
- Как только водитель забронировал автомобиль, сел за руль и выбрал маршрут, система должна оценить уровень риска
- Если уровень риска высок, водитель увидит предупреждение и рекомендации по маршруту
- Идея создания такой системы находится в стадии предварительного обсуждения и проработки. Чёткого алгоритма работы и подобных решений на рынке ещё не существует. Текущая задача — понять, возможно ли предсказывать ДТП, опираясь на исторические данные одного из регионов


- Провести статистический анализ факторов ДТП
  1. Выясните, в какие месяцы происходит наибольшее количество аварий. Проанализируйте весь период наблюдений (таблица `collisions`).
    - Постройте график
  2. Скоро состоится первое совещание вашей рабочей группы. Чтобы обсуждение было конструктивным, каждый сотрудник должен понимать данные. Для этого вы должны создать подходящие аналитические задачи и поручить их решение коллегам. Примеры задач:
    - Проведите анализ серьёзности повреждений транспортного средства, исходя из состояния дороги в момент ДТП (связать `collisions` и `parties`)
    - Найдите самые частые причины ДТП (таблица `parties`)
    1. Создайте не менее шести задач для коллег. Опирайтесь на примеры и таблицы
    2. Пропишите порядок решения для двух задач из списка. Обязательное условие — решение этих задач должно включать связь не менее 2-х таблиц


- Создать модель предсказания ДТП (целевое значение — `at_fault` (виновник) в таблице `parties`)
    - Для модели выбрать тип виновника — только машина (`car`).
    - Выбрать случаи, когда ДТП привело к любым повреждениям транспортного средства, кроме типа SCRATCH (царапина).
    - Для моделирования ограничиться данными за 2012 год — они самые свежие.
    - Обязательное условие — учесть фактор возраста автомобиля.
- На основе модели исследовать основные факторы ДТП.
- Понять, помогут ли результаты моделирования и анализ важности факторов ответить на вопросы:
  - Возможно ли создать адекватную системы оценки водительского риска при выдаче авто?
  - Какие ещё факторы нужно учесть?
  - Нужно ли оборудовать автомобиль какими-либо датчиками или камерой?


- Создать модель для оценки водительского риска
  1. Подготовьте набор данных на основе первичного предположения заказчика:
    - Выберите тип виновника — только машина (`car`)
    - Возьмите случаи, когда ДТП привело к любым значимым повреждениям автомобиля любого из участников — все, кроме типа SCRATCH (царапина).
    - Для моделирования возьмите данные только за 2012 год.
    - Подготовка исходной таблицы должна проводиться с помощью sql-запроса.
  2. Проведите первичный отбор факторов, необходимых для модели.
      Изучите описание факторов. Нужно отобрать те, которые могут влиять на вероятность ДТП. Будет хорошо, если вы аргументируете свой выбор. Пример:
      
      ```python
      columms =['party_type',     # Тип участника происшествия. Таблица parties
                'party_sobriety', # Уровень трезвости виновника (точно может влиять) Таблица parties
                ......
              ]
      ```
  3. Проведите статистическое исследование отобранных факторов.
    - По результату исследовательского анализа внесите корректировки, если они нужны. Сделайте вывод.
    - Если необходимо, категоризируйте исходные данные, проведите масштабирование.
    - Подготовьте обучающую и тестовую выборки


- Найдите лучшую модель
  1. Смоделируйте не менее 3-х типов моделей с перебором гиперпараметров.
  2. 1–2 модели из спринта 2 (классическое обучение)
  3. 1–2 модели из спринта 3 (XGBoost, LightGBM, CatBoost)
  4. Выберите метрику для оценки модели, исходя из поставленной бизнесом задачи. Обоснуйте свой выбор.
  5. Оформите вывод в виде сравнительной таблицы.


- Проверьте лучшую модель в работе
  1. Проведите графический анализ «Матрица ошибок». Выведите полноту и точность на график.
  2. Проанализируйте важность основных факторов, влияющих на вероятность ДТП.
  3. Для одного из выявленных важных факторов проведите дополнительное исследование:
    - Покажите график зависимости фактора и целевой переменной.
    - Предложите, чем можно оборудовать автомобиль, чтобы учесть этот фактор во время посадки водителя.
